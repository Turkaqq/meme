{% extends "base.html" %}

{% block content %}
    <h1>Генератор мемов</h1>
    
    <div class="meme-editor">
        <div class="preview-container">
            <img id="meme-preview" src="{{ url_for('static', filename='templates/default.jpg') }}">
            <div id="top-text-preview" class="meme-text top-text"></div>
            <div id="bottom-text-preview" class="meme-text bottom-text"></div>
        </div>
        
        <form id="meme-form" method="POST" enctype="multipart/form-data">
            <div class="form-group">
                <label for="image-upload">Изображение:</label>
                <input type="file" id="image-upload" name="image" accept="image/*">
            </div>
            
            <div class="form-group">
                <label for="top-text">Текст сверху:</label>
                <input type="text" id="top-text" name="top_text" maxlength="50">
            </div>
            
            <div class="form-group">
                <label for="bottom-text">Текст снизу:</label>
                <input type="text" id="bottom-text" name="bottom_text" maxlength="50">
            </div>
            
            <div class="form-group">
                <label for="font-select">Шрифт:</label>
                <select id="font-select" name="font">
                    <option value="impact">Impact</option>
                    <option value="arial">Arial</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="text-color">Цвет текста:</label>
                <input type="color" id="text-color" name="color" value="#ffffff">
            </div>
            
            <button type="submit">Создать мем</button>
        </form>
        
        {% if 'history' in session and session['history'] %}
        <div class="history">
            <h2>История мемов</h2>
            <ul>
                {% for item in session['history'] %}
                <li>
                    <a href="{{ url_for('uploaded_file', filename=item.filename) }}" download>
                        Мем от {{ item.date }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>
{% endblock %}